<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤§å…­å£¬æ™ºæ…§æ’ç›¤ - Victor AI ä¸»ç†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 18px;
            opacity: 0.95;
        }

        /* âœ… æ¸¬è©¦æ¨¡å¼æ©«å¹… */
        .test-mode-banner {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 30px;
            font-weight: 600;
            font-size: 16px;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
        }

        .pricing-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .plan {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            overflow: hidden;
        }

        .plan:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.15);
        }

        .plan.recommended {
            border: 3px solid #667eea;
        }

        .plan.recommended::before {
            content: 'æ¨è–¦';
            position: absolute;
            top: 20px;
            right: -35px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 40px;
            transform: rotate(45deg);
            font-size: 12px;
            font-weight: bold;
        }

        .plan-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .plan-name {
            font-size: 24px;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .plan-price {
            font-size: 48px;
            font-weight: 800;
            color: #667eea;
            margin-bottom: 5px;
        }

        .plan-price small {
            font-size: 20px;
            font-weight: 400;
            color: #999;
        }

        .plan-description {
            text-align: center;
            color: #666;
            margin-bottom: 25px;
            font-size: 14px;
            line-height: 1.6;
        }

        .plan-features {
            list-style: none;
            margin-bottom: 25px;
        }

        .plan-features li {
            padding: 10px 0;
            color: #555;
            border-bottom: 1px solid #f0f0f0;
            font-size: 15px;
        }

        .plan-features li:last-child {
            border-bottom: none;
        }

        .plan-features li::before {
            content: 'âœ“';
            color: #667eea;
            font-weight: bold;
            margin-right: 10px;
        }

        .plan-bonus {
            background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
            color: white;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .paypal-button-container {
            min-height: 50px;
        }

        .phone-input-container {
            margin-bottom: 20px;
        }

        .phone-input-container label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
            font-size: 14px;
        }

        .phone-input-container input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .phone-input-container input:focus {
            outline: none;
            border-color: #667eea;
        }

        .info-section {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .info-section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 22px;
        }

        .info-section p {
            color: #666;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .footer {
            text-align: center;
            color: white;
            margin-top: 40px;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 24px;
            }

            .plan-price {
                font-size: 36px;
            }

            .pricing-container {
                grid-template-columns: 1fr;
            }
        }

        .error-message {
            background: #fee;
            color: #c33;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 14px;
            border-left: 4px solid #c33;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        .success-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        .success-modal.show {
            display: flex;
        }

        .success-modal-content {
            background: white;
            padding: 40px;
            border-radius: 16px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .success-modal-content h2 {
            color: #28a745;
            margin-bottom: 20px;
        }

        .success-modal-content .code-display {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
        }

        .success-modal-content .btn {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <!-- æˆåŠŸæ¨¡æ…‹æ¡† -->
    <div id="successModal" class="success-modal">
        <div class="success-modal-content">
            <h2>âœ… ä»˜æ¬¾æˆåŠŸï¼</h2>
            <div id="successMessage"></div>
            <button class="btn" onclick="goToDivination()">å‰å¾€èµ·å¦</button>
        </div>
    </div>
    <div class="container">
        <div class="header">
            <h1>ğŸ”® å¤§å…­å£¬æ™ºæ…§æ’ç›¤</h1>
            <p>Victor AI ä¸»ç† Â· å°ˆæ¥­å‘½ç†åˆ†æç³»çµ±</p>
        </div>

        <!-- âœ… æ¸¬è©¦æ¨¡å¼æ©«å¹… -->
        <div class="test-mode-banner">
            âš ï¸ æ¸¬è©¦æ¨¡å¼ï¼šå–®æ¬¡æ–¹æ¡ˆ $1 HKD | 3æ¬¡æ–¹æ¡ˆ $10 HKD
        </div>

        <div class="pricing-container">
            <!-- å–®æ¬¡æ–¹æ¡ˆ -->
            <div class="plan">
                <div class="plan-header">
                    <div class="plan-name">å–®æ¬¡èµ·å¦</div>
                    <div class="plan-price">$1<small> HKD</small></div>
                    <div class="plan-description">é©åˆåˆæ¬¡é«”é©—æˆ–å–®ä¸€å•é¡Œå åœ</div>
                </div>

                <ul class="plan-features">
                    <li>å®Œæ•´å¤§å…­å£¬èµ·å¦æ’ç›¤</li>
                    <li>AI æ™ºæ…§å°ˆæ¥­è§£è®€</li>
                    <li>è©³ç´°èª²é«”åˆ†æ</li>
                    <li>ç²¾ç¾ HTML å ±å‘Š</li>
                    <li>30å¤©æœ‰æ•ˆæœŸ</li>
                </ul>

                <div class="phone-input-container">
                    <label for="phone-single">æ‰‹æ©Ÿè™Ÿç¢¼ï¼ˆç”¨æ–¼æ¥æ”¶èµ·å¦ç¢¼å’Œå¯†ç¢¼ï¼‰</label>
                    <input type="tel" id="phone-single" placeholder="è«‹è¼¸å…¥æ‰‹æ©Ÿè™Ÿç¢¼ï¼ˆè‡³å°‘8ä½ï¼‰" maxlength="15">
                    <div class="error-message" id="error-single"></div>
                </div>

                <div id="paypal-button-single" class="paypal-button-container"></div>
            </div>

            <!-- 3æ¬¡æ–¹æ¡ˆï¼ˆæ¨è–¦ï¼‰ -->
            <div class="plan recommended">
                <div class="plan-header">
                    <div class="plan-name">3æ¬¡å¥—é¤</div>
                    <div class="plan-price">$10<small> HKD</small></div>
                    <div class="plan-description">è¶…å€¼å„ªæƒ ï¼Œæ–°å®¢æˆ¶å°ˆå±¬</div>
                </div>

                <div class="plan-bonus">ğŸ æ–°å®¢å¥‰é€ 2 æ¬¡ (å…±5æ¬¡)</div>

                <ul class="plan-features">
                    <li>è³¼è²·3æ¬¡ï¼Œé€2æ¬¡ï¼ˆå…±5æ¬¡ï¼‰</li>
                    <li>å®Œæ•´å¤§å…­å£¬èµ·å¦æ’ç›¤</li>
                    <li>AI æ™ºæ…§å°ˆæ¥­è§£è®€</li>
                    <li>è©³ç´°èª²é«”åˆ†æ</li>
                    <li>ç²¾ç¾ HTML å ±å‘Š</li>
                    <li>30å¤©æœ‰æ•ˆæœŸ</li>
                </ul>

                <div class="phone-input-container">
                    <label for="phone-triple">æ‰‹æ©Ÿè™Ÿç¢¼ï¼ˆç”¨æ–¼æ¥æ”¶èµ·å¦ç¢¼å’Œå¯†ç¢¼ï¼‰</label>
                    <input type="tel" id="phone-triple" placeholder="è«‹è¼¸å…¥æ‰‹æ©Ÿè™Ÿç¢¼ï¼ˆè‡³å°‘8ä½ï¼‰" maxlength="15">
                    <div class="error-message" id="error-triple"></div>
                </div>

                <div id="paypal-button-triple" class="paypal-button-container"></div>
            </div>
        </div>

        <div class="info-section">
            <h2>ğŸ“± è³¼è²·æµç¨‹</h2>
            <p>1ï¸âƒ£ è¼¸å…¥æ‚¨çš„æ‰‹æ©Ÿè™Ÿç¢¼ï¼ˆè‡³å°‘8ä½æ•¸å­—ï¼‰</p>
            <p>2ï¸âƒ£ é»æ“Š PayPal æŒ‰éˆ•å®Œæˆä»˜æ¬¾</p>
            <p>3ï¸âƒ£ ä»˜æ¬¾æˆåŠŸå¾Œï¼Œç³»çµ±å°‡è‡ªå‹•ç”Ÿæˆæ‚¨çš„å°ˆå±¬èµ·å¦ç¢¼</p>
            <p>4ï¸âƒ£ æ‚¨æœƒæ”¶åˆ°èµ·å¦ç¢¼å’Œé»˜èªå¯†ç¢¼ï¼ˆæ‰‹æ©Ÿè™Ÿç¢¼å¾Œ6ä½ï¼‰</p>
            <p>5ï¸âƒ£ ä½¿ç”¨èµ·å¦ç¢¼å’Œå¯†ç¢¼å³å¯é–‹å§‹èµ·å¦</p>
        </div>

        <div class="info-section">
            <h2>ğŸ” å¯†ç¢¼èªªæ˜</h2>
            <p><strong>é»˜èªå¯†ç¢¼ï¼š</strong>æ‚¨çš„æ‰‹æ©Ÿè™Ÿç¢¼å¾Œ6ä½æ•¸å­—</p>
            <p><strong>ä¿®æ”¹å¯†ç¢¼ï¼š</strong>ç™»å…¥å¾Œå¯åœ¨èµ·å¦é é¢ä¿®æ”¹å¯†ç¢¼</p>
            <p><strong>âš ï¸ é‡è¦ï¼š</strong>è«‹å¦¥å–„ä¿ç®¡æ‚¨çš„èµ·å¦ç¢¼å’Œå¯†ç¢¼ï¼Œå¿˜è¨˜å¯†ç¢¼å°‡ç„¡æ³•æ‰¾å›ï¼Œé…é¡ä¹Ÿæœƒéš¨ä¹‹å¤±æ•ˆ</p>
        </div>

        <div class="info-section">
            <h2>ğŸ’¡ ä½¿ç”¨èªªæ˜</h2>
            <p><strong>æœ‰æ•ˆæœŸï¼š</strong>èµ·å¦ç¢¼è‡ªè³¼è²·æ—¥èµ·30å¤©å…§æœ‰æ•ˆ</p>
            <p><strong>å¤šè¨­å‚™ï¼š</strong>èµ·å¦ç¢¼å¯åœ¨å¤šå€‹è¨­å‚™ä¸Šä½¿ç”¨ï¼Œå»ºè­°ä¿å­˜åœ¨ç€è¦½å™¨ä¸­</p>
            <p><strong>å®‰å…¨æ€§ï¼š</strong>èµ·å¦ç¢¼å—å¯†ç¢¼ä¿è­·ï¼Œåªæœ‰çŸ¥é“å¯†ç¢¼çš„äººæ‰èƒ½ä½¿ç”¨</p>
            <p><strong>å®¢æœæ”¯æ´ï¼š</strong>å¦‚æœ‰ä»»ä½•å•é¡Œï¼Œè«‹è¯çµ¡å®¢æœ</p>
        </div>

        <div class="footer">
            <p>Â© 2025 Victor AI ä¸»ç† Â· å¤§å…­å£¬æ™ºæ…§æ’ç›¤ç³»çµ±</p>
            <p>Powered by PayPal</p>
        </div>
    </div>

    <!-- âœ… PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=YOUR_PAYPAL_CLIENT_ID&currency=HKD"></script>

    <script>
        let currentAccessCode = '';
        let currentQuota = 0;
        let currentPassword = '';

        // âœ… é©—è­‰æ‰‹æ©Ÿè™Ÿç¢¼
        function validatePhone(phone) {
            return phone && phone.length >= 8 && /^\d+$/.test(phone);
        }

        // âœ… é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
        function showError(planType, message) {
            const errorDiv = document.getElementById(`error-${planType}`);
            errorDiv.textContent = message;
            errorDiv.classList.add('show');
            setTimeout(() => {
                errorDiv.classList.remove('show');
            }, 5000);
        }

        // âœ… é¡¯ç¤ºæˆåŠŸæ¨¡æ…‹æ¡†
        function showSuccess(code, quota, password) {
            currentAccessCode = code;
            currentQuota = quota;
            currentPassword = password;

            const messageDiv = document.getElementById('successMessage');
            messageDiv.innerHTML = `
                <p><strong>æ‚¨çš„èµ·å¦ç¢¼ï¼š</strong></p>
                <div class="code-display">${code}</div>
                <p><strong>é…é¡ï¼š</strong>${quota} æ¬¡</p>
                <p><strong>é»˜èªå¯†ç¢¼ï¼š</strong><span class="code-display" style="display:inline-block;padding:5px 10px;margin:0 5px;">${password}</span></p>
                <p style="margin-top: 20px; color: #666; font-size: 14px;">è«‹å¦¥å–„ä¿ç®¡ï¼</p>
            `;

            document.getElementById('successModal').classList.add('show');
        }

        // âœ… å‰å¾€èµ·å¦é é¢
        function goToDivination() {
            window.location.href = `/divination.html?code=${currentAccessCode}`;
        }

        // âœ… å–®æ¬¡æ–¹æ¡ˆ PayPal æŒ‰éˆ•
        paypal.Buttons({
            createOrder: function(data, actions) {
                const phone = document.getElementById('phone-single').value.trim();

                if (!validatePhone(phone)) {
                    showError('single', 'âŒ è«‹è¼¸å…¥è‡³å°‘8ä½æ•¸å­—çš„æœ‰æ•ˆæ‰‹æ©Ÿè™Ÿç¢¼');
                    return Promise.reject(new Error('Invalid phone number'));
                }

                return fetch('/api/paypal-create-order', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        planType: 'single',
                        amount: 1 // âœ… æ¸¬è©¦æ¨¡å¼ï¼š1 HKD
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.orderID) {
                        return data.orderID;
                    } else {
                        throw new Error(data.error || 'å‰µå»ºè¨‚å–®å¤±æ•—');
                    }
                })
                .catch(error => {
                    showError('single', 'âŒ ' + error.message);
                    throw error;
                });
            },
            onApprove: function(data, actions) {
                const phone = document.getElementById('phone-single').value.trim();

                return fetch('/api/paypal-capture-order', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        orderID: data.orderID,
                        phone: phone
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        showSuccess(data.code, data.quota, data.defaultPassword);
                    } else {
                        throw new Error(data.message || 'ä»˜æ¬¾è™•ç†å¤±æ•—');
                    }
                })
                .catch(error => {
                    showError('single', 'âŒ ' + error.message);
                });
            },
            onError: function(err) {
                showError('single', 'âŒ PayPal éŒ¯èª¤ï¼š' + err.message);
            }
        }).render('#paypal-button-single');

        // âœ… 3æ¬¡æ–¹æ¡ˆ PayPal æŒ‰éˆ•
        paypal.Buttons({
            createOrder: function(data, actions) {
                const phone = document.getElementById('phone-triple').value.trim();

                if (!validatePhone(phone)) {
                    showError('triple', 'âŒ è«‹è¼¸å…¥è‡³å°‘8ä½æ•¸å­—çš„æœ‰æ•ˆæ‰‹æ©Ÿè™Ÿç¢¼');
                    return Promise.reject(new Error('Invalid phone number'));
                }

                return fetch('/api/paypal-create-order', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        planType: 'triple',
                        amount: 10 // âœ… æ¸¬è©¦æ¨¡å¼ï¼š10 HKD
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.orderID) {
                        return data.orderID;
                    } else {
                        throw new Error(data.error || 'å‰µå»ºè¨‚å–®å¤±æ•—');
                    }
                })
                .catch(error => {
                    showError('triple', 'âŒ ' + error.message);
                    throw error;
                });
            },
            onApprove: function(data, actions) {
                const phone = document.getElementById('phone-triple').value.trim();

                return fetch('/api/paypal-capture-order', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        orderID: data.orderID,
                        phone: phone
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        showSuccess(data.code, data.quota + ' (3æ¬¡è³¼è²·+2æ¬¡è´ˆé€)', data.defaultPassword);
                    } else {
                        throw new Error(data.message || 'ä»˜æ¬¾è™•ç†å¤±æ•—');
                    }
                })
                .catch(error => {
                    showError('triple', 'âŒ ' + error.message);
                });
            },
            onError: function(err) {
                showError('triple', 'âŒ PayPal éŒ¯èª¤ï¼š' + err.message);
            }
        }).render('#paypal-button-triple');
    </script>
</body>
</html>
